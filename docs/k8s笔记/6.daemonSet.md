文档地址：https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/daemonset/

### DaemonSet

在每个节点上运行 pod，并且每个节点正在只需运行一个副本，常用于日志收集，网络插件、资源监视等

当然可以在指定某些节点，或者排除某些节点

```yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: shttp-ds
spec:
  selector:
    matchLabels: # pod 选择器
      beloneApp: testApp
    matchExpressions: # 同样支持
      ......
  template:
    metadata:
      labels:
        beloneApp: testApp
        publishEnv: prod
    spec:
      nodeSelector: # 节点选择
        disk: ssd
      affinity: # 也可以使用节点亲缘选择器
        ......
      containers:
        - name: shttp
          image: w4762061/shttp:v1
          ports:
            - containerPort: 8222

```



