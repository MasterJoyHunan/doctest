文档地址：https://kubernetes.io/zh-cn/docs/concepts/configuration/manage-resources-containers/#meaning-of-cpu

### 资源限制

为一个 pod 配置资源的预期使用量和最大使用量是 pod 定义中的重要组成部分。 通过设置这两组参数， 可以确保 pod 公平地使用 Kubemetes 集群资源， 同时也影响着整个集群pod的调度方式

### 需求

是在 containers 申请的，而不是在 pod 里面定义的，

```yaml
apiVersion: v1
kind: Pod
spec:
  containers:
    - name: re
      image: w4762061/shttp:v1
      resources:
        requests: # 需求的资源 - 仅调度使用，不会限制容器具体使用多少系统资源
          cpu: 1 # cpu 单位：1核 = 1000m核， 可以设置小数 0.5 (500m)
          memory: 10Mi # 内存单位：Ei、Pi、Ti、Gi、Mi、Ki
```

在调度的时候，调度器不会关系节点实际使用了多少系统资源，只会判断当前节点上所有容器所请求的资源是否可以容纳新 pod 所需的系统资源，如果无法容纳，则不会调度到该节点。

当未指定时，表示我们并不关心系统为容器内的进程分配了多少CPU时间，在最坏情况下 进程可能根本分不到 CPU时间

#### 限制

```yaml
apiVersion: v1
kind: Pod
spec:
  containers:
    - name: re
      image: w4762061/shttp:v1
      resources:
        limit: # 资源限制，如果没有设置 requests， 则 requests 默认和 limit 一致
          cpu: 1 
          memory: 10Mi 
```

limit 的设置不影响调度，假设当前节点 cpu 用干了，内存也用占用完了，调度器还是有可能会将 pod 调度到当前节点