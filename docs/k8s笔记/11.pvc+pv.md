文档地址：https://kubernetes.io/docs/concepts/storage/persistent-volumes/#persistent-volumes

建议使用 StorageClasses

### PersistentVolume  持久卷静态配置

当运行在一个 pod 中的应用程序需要将数据保存到磁盘上， 并且即使该 pod 重新调度到另 一个节点时也要求具有相同的数据可用。 因此必须将其存储在某种类型的网络存储 (NAS) 中。

```yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: volume-pv
spec:
  capacity:
    storage: 1Gi # 定义该卷的容量
  accessModes:   # 定义该卷的权限
    - ReadWriteOnce # 如果被单个客户端挂载 -- 可读可写
    - ReadOnlyMany  # 如果被多个客户端挂载 -- 只读
    # - ReadWriteMany # 如果被多个客户端挂载 -- 可读可写
    # - ReadWriteOncePod # 该卷可以由单个 Pod 以读写方式挂载
  persistentVolumeReclaimPolicy: Retain # 回收策略 Retain：手动回收 | Recycle: 回收利用 | Delete 清空
  hostPath:
    path: /f/www-k8s/test-disk
```

### PersistentVolumeClaim 持久卷声明

假设现在需要部署一个需要持久化存储的 pod ，将要用到之前创建的持久卷，但是不能直接在 pod 内使用，需要先声明声明一个持久卷和创建一个 pod 是相对独立的过程，因为即使 pod 被重新调度通过相同的持久卷声明来确保可用

```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: volume-pvc
spec:
  resources:
    requests:
      storage: 1Gi
  accessModes:
    - ReadWriteOnce
  storageClassName: "" # 必须显式设置空字符串，否则将设置默认StorageClass
```

