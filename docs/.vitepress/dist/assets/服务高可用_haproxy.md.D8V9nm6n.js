import{_ as n,c as a,a2 as p,o as e}from"./chunks/framework.DPuwY6B9.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"服务高可用/haproxy.md","filePath":"服务高可用/haproxy.md","lastUpdated":1729761429000}'),l={name:"服务高可用/haproxy.md"};function t(i,s,c,o,r,d){return e(),a("div",null,s[0]||(s[0]=[p(`<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>global</span></span>
<span class="line"><span>    log         127.0.0.1 local2</span></span>
<span class="line"><span>    chroot      /var/lib/haproxy</span></span>
<span class="line"><span>    pidfile     /var/run/haproxy.pid</span></span>
<span class="line"><span>    maxconn     4000</span></span>
<span class="line"><span>    user        haproxy</span></span>
<span class="line"><span>    group       haproxy</span></span>
<span class="line"><span>    daemon</span></span>
<span class="line"><span>    stats socket /var/lib/haproxy/stats</span></span>
<span class="line"><span></span></span>
<span class="line"><span>defaults</span></span>
<span class="line"><span>    mode                    http</span></span>
<span class="line"><span>    log                     global</span></span>
<span class="line"><span>    option                  httplog</span></span>
<span class="line"><span>    option                  dontlognull</span></span>
<span class="line"><span>    option http-server-close</span></span>
<span class="line"><span>    option forwardfor       except 127.0.0.0/8</span></span>
<span class="line"><span>    option                  redispatch</span></span>
<span class="line"><span>    retries                 3</span></span>
<span class="line"><span>    timeout http-request    10s</span></span>
<span class="line"><span>    timeout queue           1m</span></span>
<span class="line"><span>    timeout connect         10s</span></span>
<span class="line"><span>    timeout client          1m</span></span>
<span class="line"><span>    timeout server          1m</span></span>
<span class="line"><span>    timeout http-keep-alive 10s</span></span>
<span class="line"><span>    timeout check           10s</span></span>
<span class="line"><span>    maxconn                 3000</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 前端配置</span></span>
<span class="line"><span>frontend  main *:8080</span></span>
<span class="line"><span>    default_backend             app # 连接到哪个后端</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 后端配置</span></span>
<span class="line"><span>backend app</span></span>
<span class="line"><span>    balance     roundrobin</span></span>
<span class="line"><span>    server  213 192.168.20.213:80 check</span></span>
<span class="line"><span>    server  214 192.168.20.214:80 check</span></span>
<span class="line"><span></span></span>
<span class="line"><span># haproxy 统计信息 复制即可</span></span>
<span class="line"><span>listen stats *:1250</span></span>
<span class="line"><span>    stats auth root:123456</span></span>
<span class="line"><span>    stats uri /stats</span></span>
<span class="line"><span>    stats refresh 30s</span></span>
<span class="line"><span>    stats realm Haproxy Manager</span></span></code></pre></div>`,1)]))}const m=n(l,[["render",t]]);export{u as __pageData,m as default};
